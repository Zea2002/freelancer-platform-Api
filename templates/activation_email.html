
<!DOCTYPE html>
<html>
<head>
    <title>Activate Your Account</title>
</head>
<body>
    <p>Hi {{ user.first_name }},</p>
    <p>Thank you for registering with us. Please click the link below to activate your account:</p>
    <p><a href="{{ confirm_link }}" id="activate-link" style="background-color: #4CAF50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Activate Account</a></p>
    <p>If you did not request this email, please ignore it.</p>

    <script>
        document.getElementById('activate-link').onclick = function(event) {
            event.preventDefault(); 
            
            const url = this.href; 
            
            fetch(url)
                .then(response => {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error("Activation link is invalid or expired.");
                    }
                })
                .then(data => {
                    alert(data.message);
                    
                    setTimeout(() => {
                        window.location.href = '/login.html'; 
                    }, 2000); 
                })
                .catch(error => {
                    alert(error.message); 
                   
                    setTimeout(() => {
                        window.location.href = '/register.html'; 
                    }, 2000); 
                });
        };
    </script>
</body>
</html>
